# nlp section

snippet nlp-js-dep:
  name: "JavaScript dependency"
  prefix: "js-01"
  scope: "json"
  body: |
    "axios" :"1.7.7"

# Emotion analysis section

snippet emotion-bearer:
  name: "Emotion bearer"
  prefix: "js-02"
  scope: "javascript"
  body: |
    const options = {
      headers: {
        'Content-Type': 'application/json',
        'Authorization' : 'Bearer ' + process.env.OVH_AI_ENDPOINTS_ACCESS_TOKEN
      }
    };

snippet emotion-call:
  name: "Emotion call"
  prefix: "js-03"
  scope: "javascript"
  body: |    
    axios
      .post('https://roberta-base-go-emotions.endpoints.kepler.ai.cloud.ovh.net/api/text2emotions', 'I love JS', options)
      .then(res => {
        const sortedEmotions = Object.entries(res.data).sort((a, b) => b[1] - a[1]);
        console.log(sortedEmotions[0][0]);
      })
      .catch(err => {
        console.error(err)
      })

# Product review section

snippet product-bearer:
  name: "Product bearer"
  prefix: "js-06"
  scope: "javascript"
  body: |
    const options = {
      headers: {
        'Content-Type': 'application/json',
        'Authorization' : 'Bearer ' + process.env.OVH_AI_ENDPOINTS_ACCESS_TOKEN
      }
    };

snippet product-call:
  name: "Product call"
  prefix: "js-07"
  scope: "javascript"
  body: |    
    axios
      .post("https://bert-base-multilingual-uncased-sentiment.endpoints.kepler.ai.cloud.ovh.net/api/text2sentiments", "Bon produit, envoyé dans les temps. Service après vente perfectible.", options)
      .then((res) => {
        const maxRating = Math.max(...Object.values(res.data));
        const maxRatingKey = Object.keys(res.data).find(key => res.data[key] === maxRating);
        
        const numStars = parseInt(maxRatingKey.split(' ')[0]);

        let starString = '';
        for (let i = 0; i < numStars; i++) {
          starString += '⭐️';
        }

        console.log(starString);    
      })
      .catch((err) => {
        console.error(err);
      });

# Text classification section

snippet text-class-bearer:
  name: "Text classification bearer"
  prefix: "js-04"
  scope: "javascript"
  body: |
    const options = {
      headers: {
        'Content-Type': 'application/json',
        'Authorization' : 'Bearer ' + process.env.OVH_AI_ENDPOINTS_ACCESS_TOKEN
      }
    };

snippet text-class-call:
  name: "Text classification call"
  prefix: "js-05"
  scope: "javascript"
  body: |    
    axios
      .post("https://bert-base-ner.endpoints.kepler.ai.cloud.ovh.net/api/text2ner", "My name is Clara and I live in Berkeley, California.", options)
      .then((res) => {
        console.log(res.data);
        const output = res.data.map((entity) => {
          let description;
          switch (entity.entity) {
            case "B-PER":
              description = "is a person";
              break;
            case "B-LOC":
              description = "a location";
              break;
            case "B-ORG":
              description = "an organization";
              break;
            case "B-MISC":
              description = "other";
              break;

            default:
              description = "undefined";
          }
          return `\${entity.word} is \${description}`;
        });

        console.log(output.join(", "));
      })
      .catch((err) => {
        console.error(err);
      });

# Python version
snippet py-76:
  name: "Emotion URL"
  prefix: "py-76"
  scope: "python"
  body: |
    url = "https://roberta-base-go-emotions.endpoints.kepler.ai.cloud.ovh.net/api/text2emotions"

snippet py-77:
  name: "Emotion bearer"
  prefix: "py-77"
  scope: "python"
  body: |
    headers = {
    "Content-Type": "application/json",
    "Authorization": f"Bearer {os.getenv('OVH_AI_ENDPOINTS_ACCESS_TOKEN')}",
    }

snippet py-78:
  name: "Emotion model call"
  prefix: "py-78"
  scope: "python"
  body: |
    response = requests.post(url, data="I love Python", headers=headers)
    if response.status_code == 200:
        response_data = response.json()
        max_key = max(response_data, key=response_data.get)
        print(f"Emotion: {max_key}")
    else:
        print("❌ Error:", response.status_code)

snippet py-79:
  name: "Classification URL"
  prefix: "py-79"
  scope: "python"
  body: |
    url = "https://bert-base-ner.endpoints.kepler.ai.cloud.ovh.net/api/text2ner"

snippet py-80:
  name: "Classification header"
  prefix: "py-80"
  scope: "python"
  body: |
    headers = {
    "Content-Type": "text/plain",
    "Authorization": f"Bearer {os.getenv('OVH_AI_ENDPOINTS_ACCESS_TOKEN')}",
    }

snippet py-81:
  name: "Classification model call"
  prefix: "py-81"
  scope: "python"
  body: |
    response = requests.post(url, data={"text": "My name is Clara and I live in Berkeley, California."}, headers=headers)
    if response.status_code == 200:
        response_data = response.json()
        res_data = response.json()
        
        output = []
        for entity in res_data:
            description = ""
            if entity['entity'] == "B-PER":
                description = "is a person"
            elif entity['entity'] == "B-LOC":
                description = "a location"
            elif entity['entity'] == "B-ORG":
                description = "an organization"
            elif entity['entity'] == "B-MISC":
                description = "other"
            else:
                description = "undefined"
            
            output.append(f"{entity['word']} {description}")
        
        print(", ".join(output))
    else:
        print("Error:", response.status_code)

snippet py-82:
  name: "Review URL"
  prefix: "py-82"
  scope: "python"
  body: |
    url = "https://bert-base-multilingual-uncased-sentiment.endpoints.kepler.ai.cloud.ovh.net/api/text2sentiments"

snippet py-83:
  name: "Review header"
  prefix: "py-83"
  scope: "python"
  body: |
    headers = {
    "Content-Type": "application/json",
    "Authorization": f"Bearer {os.getenv('OVH_AI_ENDPOINTS_ACCESS_TOKEN')}",
    }

snippet py-84:
  name: "Review model call"
  prefix: "py-84"
  scope: "python"
  body: |
    response = requests.post(url, data="Good product, delivered on time. Improved after-sales service.", headers=headers)
    if response.status_code == 200:
        response_data = response.json()
        max_key = max(response_data, key=response_data.get)
        num_stars = int(max_key.split()[0])
        star_emoji = '⭐️' * num_stars
        print(f"Review : {star_emoji}")
    else:
        print("❌ Error:", response.status_code)